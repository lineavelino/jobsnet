<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./index.css">
    <title>JobsNet | Cadastro</title>
</head>

<body>
    <header>
        <div>
            <img src="./images/logo.svg" alt="Logo JobsNet">
            <h1>Banco de talentos</h1>
        </div>
    </header>

    <form action="/register" method="post">
        <h3>DADOS PESSOAIS</h3>

        <fieldset class="container-data">
            <div>
                <label for="name">Nome completo:</label>
                <input type="text" name="name" placeholder="Bill Gates" />
            </div>

            <div>
                <label for="role">Cargo pretendido:</label>
                <input type="text" name="role" placeholder="CEO da Microsoft" />
            </div>

            <div>
                <label for="birthDate">Data de nascimento</label>
                <input type="date" name="birthDate" />
            </div>

            <div>
                <label for="cpf">CPF</label>
                <input type="Number" name="cpf" placeholder="12345678901" />
            </div>

            <div>
                <label for="maritalStatus">Estado Civil</label>
                <select name="maritalStatus">
                    <option value="" disabled selected>Selecione</option>
                    <option value="single">Solteira(o)</option>
                    <option value="married">Casada(o)</option>
                    <option value="stableUnion">União estável</option>
                    <option value="divorced">Divorciada(o)</option>
                    <option value="widow">Viúva(o)</option>
                </select>
            </div>

            <div>
                <label for="gender">Sexo</label>
                <select name="gender">
                    <option value="" disabled selected>Selecione</option>
                    <option value="feminine">Feminino</option>
                    <option value="masculine">Masculino</option>
                    <option value="other">Outro</option>
                    <option value="undetermined">Prefiro não dizer</option>
                </select>
            </div>

            <div>
                <label for="zipCode">Cep</label>
                <input type="number" name="zipCode" id="zipCode" placeholder="12345-678" />
            </div>

            <div>
                <label for="address">Endereço</label>
                <input type="text" name="address" id="address" placeholder="Rua dos Alfeneiros" />
            </div>

            <div>
                <label for="houseNumber">Número</label>
                <input type="number" name="houseNumber" placeholder="04" />
            </div>

            <div>
                <label for="houseComplement">Complemento</label>
                <input type="text" name="houseComplement" placeholder="Fundos" />
            </div>

            <div>
                <label for="neighborhood">Bairro</label>
                <input type="text" name="neighborhood" id="neighborhood" placeholder="Copacabana" />
            </div>

            <div>
                <label for="city">Cidade</label>
                <input type="text" name="city" id="city" placeholder="Rio de Janeiro" />
            </div>

            <div>
                <label for="uf">Estado</label>
                <input type="text" name="uf" id="uf" placeholder="RJ" />
            </div>

            <div>
                <label for="telephone1">Telefone 1</label>
                <input type="tel" name="telephone1" placeholder="(21) 91234-5678" />
            </div>

            <div>
                <label for="email">Seu melhor email:</label>
                <input type="text" name="email" placeholder="billgates@microsoft.com" />
            </div>

        </fieldset>

        <h3>REDES SOCIAIS</h3>

        <fieldset class="container-social">
            <div>
                <label for="linkedin">LinkedIn</label>
                <input type="url" name="linkedin" placeholder="linkedin.com/billgates">
            </div>

            <div>
                <label for="github">GitHub</label>
                <input type="url" name="github" placeholder="github.com/billgates">
            </div>

            <div>
                <label for="facebook">Facebook</label>
                <input type="url" name="facebook" placeholder="facebook.com/billgates">
            </div>

            <div>
                <label for="twitter">Twitter</label>
                <input type="url" name="twitter" placeholder="twitter.com/billgates">
            </div>
        </fieldset>

        <button type="submit">Tudo pronto! Enviar <img src="./images/forward.svg" alt="avançar"></button>

        <div class="onboarding">
            <img src="./images/onboarding.svg" alt="Imagem de onboarding">
        </div>
    </form>
</body>

<script>
    const validarCep = (cep) => /^[0-9]+$/.test(cep);

    const cepValido = (cep) => cep.length == 8 && validarCep(cep);

    const buscarCep = async () => {
        limparFormulario();
        const cep = document.getElementById('zipCode').value;
        const url = `https://viacep.com.br/ws/${cep}/json/`;

        if (cepValido(cep)) {
            const dados = await fetch(url);
            const endereco = await dados.json();

            if (endereco.hasOwnProperty('erro')) {
                document.getElementById('address').value = 'Cep não encontrado';
            } else {
                preencherFormulario(endereco);
            }
        } else {
            document.getElementById('address').value = 'Cep incorreto';
        }

    }

    const limparFormulario = (endereco) => {
        document.getElementById('address').value = "";
        document.getElementById('neighborhood').value = "";
        document.getElementById('city').value = "";
        document.getElementById('uf').value = "";
    }

    const preencherFormulario = (endereco) => {
        document.getElementById('address').value = endereco.logradouro;
        document.getElementById('neighborhood').value = endereco.bairro;
        document.getElementById('city').value = endereco.localidade;
        document.getElementById('uf').value = endereco.uf;
    }

    document.getElementById('zipCode').addEventListener('blur', buscarCep)
</script>

</html>